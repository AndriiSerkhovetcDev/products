"use strict";(self.webpackChunkproduct_list_front=self.webpackChunkproduct_list_front||[]).push([[221],{2314:(A,g,o)=>{o.d(g,{M:()=>t});var l=o(3144),r=o(262),h=o(4004),v=o(2843);const c="http://localhost:3000";var u=o(1940),_=o(3020);let t=(()=>{class a{constructor(i){this.httpClient=i,this.httpHeaders=(new l.WM).set("Content-Type","application/json")}addProduct(i){return this.httpClient.post(`${c}/${u.V.addProduct}`,i).pipe((0,r.K)(this.handleError))}getProducts(){return this.httpClient.get(`${c}/${u.V.getProducts}`)}getProductById(i){return this.httpClient.get(`${c}/${u.V.getProducts}/${i}`,{headers:this.httpHeaders}).pipe((0,h.U)(m=>m||{}),(0,r.K)(this.handleError))}updateProduct(i,s){return this.httpClient.put(`${c}/${u.V.updateProduct}/${i}`,s).pipe((0,r.K)(this.handleError))}deleteProduct(i){return this.httpClient.delete(`${c}/${u.V.deleteProduct}/${i}`,{headers:this.httpHeaders}).pipe((0,r.K)(this.handleError))}handleError(i){let s="";return s=i?.error instanceof ErrorEvent?i.error.message:`Error Code: ${i?.status}\nMessage: ${i?.message}`,(0,v._)(()=>{})}}return a.\u0275fac=function(i){return new(i||a)(_.LFG(l.eN))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},8221:(A,g,o)=>{o.r(g),o.d(g,{AddProductComponent:()=>M});var l=o(4755),r=o(5030),h=o(2314),v=o(7354),c=o(7579),u=o(2722),_=o(1109),t=o(3020),a=o(4876),P=o(2018);function i(n,p){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getErrorMessage("name")," ")}}function s(n,p){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getErrorMessage("price")," ")}}function m(n,p){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getErrorMessage("description")," ")}}function I(n,p){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getErrorMessage("image")," ")}}const f=function(n){return{"is-invalid":n}};let M=(()=>{class n{constructor(e,d,E,C,T){this.formBuilder=e,this.route=d,this.productService=E,this.formValidationService=C,this.toastr=T,this.selectedFile=null,this.destroy$=new c.x,this.productForm=this.formBuilder.group({name:["",[r.kI.required,r.kI.minLength(3)]],price:["",[r.kI.required,r.kI.pattern(/^\d+(\.\d{1,2})?$/)]],description:["",[r.kI.required,r.kI.maxLength(200)]],image:["",[r.kI.required,this.formValidationService.fileExtension()]]})}onFileSelected(e){const d=e.target.files?.[0];d&&(this.selectedFile=d)}onSubmit(){if(this.productForm.invalid)return;const e=new FormData;e.append("name",this.productForm.value.name),e.append("price",this.productForm.value.price),e.append("description",this.productForm.value.description),this.selectedFile&&e.append("image",this.selectedFile),this.productService.addProduct(e).pipe((0,u.R)(this.destroy$)).subscribe(()=>{this.toastr.success(_.k.addedProduct),this.productForm.reset(),this.route.navigate(["products"])})}isInvalid(e){return this.formValidationService.isInvalid(e,this.productForm)}getErrorMessage(e){return this.formValidationService.getErrorMessage(e,this.productForm)}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(a.F0),t.Y36(h.M),t.Y36(v.m),t.Y36(P._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-product"]],standalone:!0,features:[t._Bn([h.M,v.m]),t.jDz],decls:28,vars:18,consts:[[1,"row","justify-content-center","mt-5"],[1,"col-md-8"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"pb-1"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["class","error-message",4,"ngIf"],["type","text","formControlName","price","required","",1,"form-control",3,"ngClass"],["type","text","formControlName","description","required","",1,"form-control",3,"ngClass"],["type","file","formControlName","image","required","",1,"form-control",3,"ngClass","change"],[1,"form-group","d-flex","justify-content-end","pt-3"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"error-message"]],template:function(e,d){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Add new product"),t.qZA(),t.TgZ(4,"form",2),t.NdJ("ngSubmit",function(){return d.onSubmit()}),t.TgZ(5,"div",3)(6,"label",4),t._uU(7,"Name"),t.qZA(),t._UZ(8,"input",5),t.YNc(9,i,2,1,"div",6),t.qZA(),t.TgZ(10,"div",3)(11,"label",4),t._uU(12,"Price"),t.qZA(),t._UZ(13,"input",7),t.YNc(14,s,2,1,"div",6),t.qZA(),t.TgZ(15,"div",3)(16,"label",4),t._uU(17,"Description"),t.qZA(),t._UZ(18,"input",8),t.YNc(19,m,2,1,"div",6),t.qZA(),t.TgZ(20,"div",3)(21,"label",4),t._uU(22,"Image"),t.qZA(),t.TgZ(23,"input",9),t.NdJ("change",function(C){return d.onFileSelected(C)}),t.qZA(),t.YNc(24,I,2,1,"div",6),t.qZA(),t.TgZ(25,"div",10)(26,"button",11),t._uU(27,"Add Product"),t.qZA()()()()()),2&e&&(t.xp6(4),t.Q6J("formGroup",d.productForm),t.xp6(4),t.Q6J("ngClass",t.VKq(10,f,d.isInvalid("name"))),t.xp6(1),t.Q6J("ngIf",d.isInvalid("name")),t.xp6(4),t.Q6J("ngClass",t.VKq(12,f,d.isInvalid("price"))),t.xp6(1),t.Q6J("ngIf",d.isInvalid("price")),t.xp6(4),t.Q6J("ngClass",t.VKq(14,f,d.isInvalid("description"))),t.xp6(1),t.Q6J("ngIf",d.isInvalid("description")),t.xp6(4),t.Q6J("ngClass",t.VKq(16,f,d.isInvalid("image"))),t.xp6(1),t.Q6J("ngIf",d.isInvalid("image")),t.xp6(2),t.Q6J("disabled",d.productForm.invalid))},dependencies:[l.ez,l.mk,l.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u],styles:[".error-message[_ngcontent-%COMP%]{font-size:10px;padding-top:5px;color:red}"]}),n})()}}]);
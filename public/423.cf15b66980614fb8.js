"use strict";(self.webpackChunkproduct_list_front=self.webpackChunkproduct_list_front||[]).push([[423],{1423:(U,l,n)=>{n.r(l),n.d(l,{AuthFormComponent:()=>C});var u=n(4755),s=n(5030),m=n(4876),g=n(7579),p=n(262),c=n(2843),v=n(2722),_=n(3144),t=n(3020),f=n(7354),E=n(9583),T=n(2018);function I(o,a){if(1&o&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.hij(" ",r.getErrorMessage("email")," ")}}function O(o,a){if(1&o&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.hij(" ",r.getErrorMessage("password")," ")}}const h=function(o){return{"is-invalid":o}},A=function(o){return[o]};let C=(()=>{class o{constructor(r,i,e,d,D,M){this.formBuilder=r,this.formValidationService=i,this.router=e,this.route=d,this.authService=D,this.toastr=M,this.isSingIn=!1,this.redirectTo="",this.actionText="",this.actionLabel="",this.linkText="",this.destroy$=new g.x,this.isSingIn="login"===this.router.snapshot.routeConfig?.path,this.redirectTo=this.isSingIn?"/register":"/login",this.actionText=this.isSingIn?"Sign-in":"Sign-up",this.actionLabel=this.isSingIn?"Don\u2019t have an account ?":"Already have an account",this.linkText=this.isSingIn?"Sign-up":"Sign-in",this.authForm=this.formBuilder.group({email:["",[s.kI.required,s.kI.email]],password:["",[s.kI.required,s.kI.minLength(6)]]})}isInvalid(r){return this.formValidationService.isInvalid(r,this.authForm)}getErrorMessage(r){return this.formValidationService.getErrorMessage(r,this.authForm)}onSubmit(){if(this.authForm.invalid)return;const r={...this.authForm.value};this.performUserOperation(r,this.isSingIn?"loginUser":"registerUser")}performUserOperation(r,i){this.authService[i](r).pipe((0,p.K)((e,d)=>(this.toastr.error(e.error.error),(0,c._)(e.error))),(0,v.R)(this.destroy$)).subscribe(e=>{localStorage.setItem("token",e.token),this.toastr.success(e.message),this.route.navigate([""])})}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete()}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(s.qu),t.Y36(f.m),t.Y36(m.gz),t.Y36(m.F0),t.Y36(E.e),t.Y36(T._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-auth-form"]],standalone:!0,features:[t._Bn([_.JF]),t.jDz],decls:23,vars:17,consts:[[1,"row","justify-content-center","mt-5"],[1,"col-md-8"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"pb-1"],["type","email","formControlName","email","required","",1,"form-control",3,"ngClass"],["class","error-message",4,"ngIf"],["type","password","formControlName","password","required","",1,"form-control",3,"ngClass"],[1,"pt-2"],[3,"routerLink"],[1,"form-group","d-flex","justify-content-end","pt-3"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"error-message"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(5,"div",3)(6,"label",4),t._uU(7,"Email"),t.qZA(),t._UZ(8,"input",5),t.YNc(9,I,2,1,"div",6),t.qZA(),t.TgZ(10,"div",3)(11,"label",4),t._uU(12,"Password"),t.qZA(),t._UZ(13,"input",7),t.YNc(14,O,2,1,"div",6),t.qZA(),t.TgZ(15,"div",8)(16,"label"),t._uU(17),t.TgZ(18,"a",9),t._uU(19),t.qZA()()(),t.TgZ(20,"div",10)(21,"button",11),t._uU(22),t.qZA()()()()()),2&r&&(t.xp6(3),t.Oqu(i.actionText),t.xp6(1),t.Q6J("formGroup",i.authForm),t.xp6(4),t.Q6J("ngClass",t.VKq(11,h,i.isInvalid("email"))),t.xp6(1),t.Q6J("ngIf",i.isInvalid("email")),t.xp6(4),t.Q6J("ngClass",t.VKq(13,h,i.isInvalid("password"))),t.xp6(1),t.Q6J("ngIf",i.isInvalid("password")),t.xp6(3),t.hij("",i.actionLabel," "),t.xp6(1),t.Q6J("routerLink",t.VKq(15,A,i.redirectTo)),t.xp6(1),t.hij(" ",i.linkText," "),t.xp6(2),t.Q6J("disabled",i.authForm.invalid),t.xp6(1),t.Oqu(i.actionText))},dependencies:[u.ez,u.mk,u.O5,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.UX,s.sg,s.u,m.rH,_.JF]}),o})()}}]);
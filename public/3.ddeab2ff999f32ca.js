"use strict";(self.webpackChunkproduct_list_front=self.webpackChunkproduct_list_front||[]).push([[3],{3003:(T,u,n)=>{n.r(u),n.d(u,{ProductUpdateComponent:()=>U});var d=n(4755),m=n(4232),p=n(5855),o=n(5030),_=n(7354),g=n(7579),v=n(1109),e=n(3020),f=n(4876),h=n(2018);function P(r,s){if(1&r&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("name")," ")}}function I(r,s){if(1&r&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("price")," ")}}function E(r,s){if(1&r&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("description")," ")}}function C(r,s){if(1&r&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("image")," ")}}const a=function(r){return{"is-invalid":r}};let U=(()=>{class r{constructor(t,i,c,l,Z){this.productService=t,this.router=i,this.formValidationService=c,this.formBuilder=l,this.toastr=Z,this.id="",this.selectedFile=null,this.selectedImagePath="",this.destroy$=new g.x,this.id=this.router.getCurrentNavigation()?.extras?.state?.id||"",this.editForm=this.formBuilder.group({name:["",[o.kI.required,o.kI.minLength(3)]],price:["",[o.kI.required,o.kI.pattern(/^\d+(\.\d{1,2})?$/)]],description:["",[o.kI.required,o.kI.maxLength(200)]],image:["",[this.formValidationService.fileExtension()]]}),this.id&&this.getProductById(this.id)}getProductById(t){return this.productService.getProductById(t).pipe((0,p.sL)()).subscribe(i=>{this.editForm.setValue({name:i?.name,price:i?.price,description:i?.description,image:null}),this.selectedImagePath=i.imagePath})}isInvalid(t){return this.formValidationService.isInvalid(t,this.editForm)}getErrorMessage(t){return this.formValidationService.getErrorMessage(t,this.editForm)}onSubmit(){if(this.editForm.invalid)return;const t=new FormData;t.append("name",this.editForm.value.name),t.append("price",this.editForm.value.price),t.append("description",this.editForm.value.description),t.append("image",this.selectedFile?this.selectedFile:this.selectedImagePath),this.productService.updateProduct(this.id,t).pipe((0,p.sL)()).subscribe(()=>{this.toastr.success(v.k.updatedProduct),this.router.navigate(["products"])})}onFileSelected(t){const i=t.target.files?.[0];i&&(this.selectedFile=i)}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.M),e.Y36(f.F0),e.Y36(_.m),e.Y36(o.qu),e.Y36(h._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-product-update"]],standalone:!0,features:[e._Bn([m.M,_.m]),e.jDz],decls:28,vars:18,consts:[[1,"row","justify-content-center","mt-5"],[1,"col-md-8"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"pb-1"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["class","error-message",4,"ngIf"],["type","text","formControlName","price","required","",1,"form-control",3,"ngClass"],["type","text","formControlName","description","required","",1,"form-control",3,"ngClass"],["type","file","formControlName","image","value","editForm.image",1,"form-control",3,"ngClass","change"],[1,"form-group","d-flex","justify-content-end","pt-3"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"error-message"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"Update product"),e.qZA(),e.TgZ(4,"form",2),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(5,"div",3)(6,"label",4),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",5),e.YNc(9,P,2,1,"div",6),e.qZA(),e.TgZ(10,"div",3)(11,"label",4),e._uU(12,"Price"),e.qZA(),e._UZ(13,"input",7),e.YNc(14,I,2,1,"div",6),e.qZA(),e.TgZ(15,"div",3)(16,"label",4),e._uU(17,"Description"),e.qZA(),e._UZ(18,"input",8),e.YNc(19,E,2,1,"div",6),e.qZA(),e.TgZ(20,"div",3)(21,"label",4),e._uU(22,"Image"),e.qZA(),e.TgZ(23,"input",9),e.NdJ("change",function(l){return i.onFileSelected(l)}),e.qZA(),e.YNc(24,C,2,1,"div",6),e.qZA(),e.TgZ(25,"div",10)(26,"button",11),e._uU(27,"Save Product"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",i.editForm),e.xp6(4),e.Q6J("ngClass",e.VKq(10,a,i.isInvalid("name"))),e.xp6(1),e.Q6J("ngIf",i.isInvalid("name")),e.xp6(4),e.Q6J("ngClass",e.VKq(12,a,i.isInvalid("price"))),e.xp6(1),e.Q6J("ngIf",i.isInvalid("price")),e.xp6(4),e.Q6J("ngClass",e.VKq(14,a,i.isInvalid("description"))),e.xp6(1),e.Q6J("ngIf",i.isInvalid("description")),e.xp6(4),e.Q6J("ngClass",e.VKq(16,a,i.isInvalid("image"))),e.xp6(1),e.Q6J("ngIf",i.isInvalid("image")),e.xp6(2),e.Q6J("disabled",i.editForm.invalid))},dependencies:[d.ez,d.mk,d.O5,o.u5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.UX,o.sg,o.u]}),r})()}}]);